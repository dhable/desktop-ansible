- name: Checking for prior nvm package
  ansible.builtin.stat:
    path: ~/.nvm
  register: nvm

- name: Installing nvm
  ansible.builtin.shell: curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.38.0/install.sh | bash
  when: not nvm.stat.exists

- name: Installing node.js
  ansible.builtin.shell: nvm install node
  when: not nvm.stat.exists
